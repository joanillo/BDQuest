amb el compte de jquintana@jaumebalmes.net

https://code.tutsplus.com/tutorials/create-a-google-login-page-in-php--cms-33214
Google Developers console.
https://console.cloud.google.com/apis/dashboard?pli=1&project=probable-axon-120516&folder=&organizationId=

Project name: login bdquest
de moment ho deixo 'sense organització'
---Resum:---
Pantalla de consentimiento de OAuth
Tipo de usuario
Interna
Nombre de la app
login bdquest
Correo electrónico de asistencia
jquintana@jaumebalmes.net
Logotipo de la app
Current App logo
Vínculo a la página principal de la aplicación
http://localhost/bdquest
Vínculo a la Política de Privacidad de la aplicación
http://localhost/bdquest/privacitat.html
Vínculo a las Condiciones del Servicio de la aplicación
http://localhost/bdquest/condicions.html
Dominios autorizados
No se proporcionó
Direcciones de correo electrónico de contacto
jquintana@jaumebalmes.net
---
http://localhost/bdquest/php/redirect.php

ID Client: 311185250362-5f4p7ng6pksejqv79302ofk89q4vg4p7.apps.googleusercontent.com
client secret: uMMTXWR7WqaC297CsG1DMaHB
===
Install the Google PHP SDK Client Library

composer - dependency manager for PHP
sudo apt-get install composer
cd ~/projectes/BDQuest/web/php


$ composer require google/apiclient:"^2.0"
compte! hi ha el warning que hauríem d'utilitzar Composer 2
S'ha creat la carpeta vendor/

ha funcionat. El script redirect.php ha quedat de la següent manera:

<?php
require_once 'vendor/autoload.php';
  
// init configuration
$clientID = '311185250362-5f4p7ng6pksejqv79302ofk89q4vg4p7.apps.googleusercontent.com';
$clientSecret = 'uMMTXWR7WqaC297CsG1DMaHB';
$redirectUri = 'http://localhost/bdquest/php/redirect.php';
   
// create Client Request to access Google API
$client = new Google_Client();
$client->setClientId($clientID);
$client->setClientSecret($clientSecret);
$client->setRedirectUri($redirectUri);
$client->addScope("email");
$client->addScope("profile");
  
// authenticate code from Google OAuth Flow
if (isset($_GET['code'])) {
  $token = $client->fetchAccessTokenWithAuthCode($_GET['code']);
  $client->setAccessToken($token['access_token']);
   
  // get profile info
  $google_oauth = new Google_Service_Oauth2($client);
  $google_account_info = $google_oauth->userinfo->get();
  $email =  $google_account_info->email;
  $name =  $google_account_info->name;
  
  echo $name; //ha funcionat!
  // now you can use this profile info to create account in your website and make user logged in.
} else {
  echo "<a href='".$client->createAuthUrl()."'>Google Login</a>";
}
?>
===
per acabar-ho, mirar:
https://gist.github.com/Jerry0022/27248ce51369e261829a
per fer el logout, he de posar la línia:
$client->revokeToken();
i ara ja podré connectar-me a un altre usuari del domini jaumebalmes.net

Ara el que he de fer és crear una sessió, etc.
